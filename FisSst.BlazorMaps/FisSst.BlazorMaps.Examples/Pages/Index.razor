@page "/"

@inject IJSRuntime jsRuntime

<div class="top-container">
    <h1 class="page-header">Initialization</h1>
</div>

<div class="map-wrapper">
    <Map @ref="mapRef" MapOptions="@mapOptions"></Map>
</div>


<div class="side-panel">
    <h3 class="header">Functionalities</h3>
    <SidePanelButton Label="get center"
                     IconSrc="@Icons.InitializationGetCenterIconSrc"
                     OnClick="async () => await GetCenterExample()" />
    <SidePanelButton Label="set view"
                     IconSrc="@Icons.InitializationSetViewIconSrc"
                     OnClick="async () => await mapRef.SetView(center)" />
    <SidePanelButton Label="set zoom"
                     IconSrc="@Icons.InitializationSetZoomIconSrc"
                     OnClick="async () => await mapRef.SetZoom(zoom: 16)" />
    <SidePanelButton Label="zoom in"
                     IconSrc="@Icons.InitializationZoomInIconSrc"
                     OnClick="async () => await mapRef.ZoomIn(zoomDelta: 1)" />
    <SidePanelButton Label="zoom out"
                     IconSrc="@Icons.InitializationZoomOutIconSrc"
                     OnClick="async () => await mapRef.ZoomOut(zoomDelta: 3)" />
    <SidePanelButton Label="set zoom around"
                     IconSrc="@Icons.InitializationSetZoomAroundIconSrc"
                     OnClick="async () => await mapRef.SetZoomAround(center, 10)" />
</div>

<style>
    .side-panel {
        min-width: 400px;
        display: grid;
        grid-template-rows: minmax(3rem, 5rem) repeat(2, 150px);
        grid-template-columns: repeat(4, 1fr);
    }

        .side-panel .header {
            grid-column: 1/-1;
        }

        .side-panel .icon-wrapper .icon {
            height: auto;
        }
</style>

@code {
    private static readonly LatLng center = new LatLng(50.279133, 18.685578);

    private Map mapRef;

    private MapOptions mapOptions = new MapOptions()
    {
        DivId = "mapId",
        Center = center,
        Zoom = 13,
        UrlTileLayer = "https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",
        SubOptions = new MapSubOptions()
        {
            Attribution = "&copy; <a lhref='http://www.openstreetmap.org/copyright'>OpenStreetMap</a>",
            MaxZoom = 18,
            TileSize = 512,
            ZoomOffset = -1,
        }
    };

    private async Task GetCenterExample()
    {
        LatLng center = await this.mapRef.GetCenter();
        await this.jsRuntime.InvokeAsync<string>("alert", $"Map centered at: Lat: {center.Lat}, Lng: {center.Lng}");
    }
}